                                      1 ;--------------------------------------------------------
                                      2 ; File Created by SDCC : free open source ANSI-C Compiler
                                      3 ; Version 3.6.8 #9948 (Linux)
                                      4 ;--------------------------------------------------------
                                      5 	.module delay
                                      6 	.optsdcc -mmcs51 --model-small
                                      7 	
                                      8 ;--------------------------------------------------------
                                      9 ; Public variables in this module
                                     10 ;--------------------------------------------------------
                                     11 	.globl _efm8_delay_us
                                     12 	.globl _efm8_delay_ms
                                     13 ;--------------------------------------------------------
                                     14 ; special function registers
                                     15 ;--------------------------------------------------------
                                     16 	.area RSEG    (ABS,DATA)
      000000                         17 	.org 0x0000
                                     18 ;--------------------------------------------------------
                                     19 ; special function bits
                                     20 ;--------------------------------------------------------
                                     21 	.area RSEG    (ABS,DATA)
      000000                         22 	.org 0x0000
                                     23 ;--------------------------------------------------------
                                     24 ; overlayable register banks
                                     25 ;--------------------------------------------------------
                                     26 	.area REG_BANK_0	(REL,OVR,DATA)
      000000                         27 	.ds 8
                                     28 ;--------------------------------------------------------
                                     29 ; internal ram data
                                     30 ;--------------------------------------------------------
                                     31 	.area DSEG    (DATA)
                                     32 ;--------------------------------------------------------
                                     33 ; overlayable items in internal ram 
                                     34 ;--------------------------------------------------------
                                     35 	.area	OSEG    (OVR,DATA)
                                     36 ;--------------------------------------------------------
                                     37 ; indirectly addressable internal ram data
                                     38 ;--------------------------------------------------------
                                     39 	.area ISEG    (DATA)
                                     40 ;--------------------------------------------------------
                                     41 ; absolute internal ram data
                                     42 ;--------------------------------------------------------
                                     43 	.area IABS    (ABS,DATA)
                                     44 	.area IABS    (ABS,DATA)
                                     45 ;--------------------------------------------------------
                                     46 ; bit data
                                     47 ;--------------------------------------------------------
                                     48 	.area BSEG    (BIT)
                                     49 ;--------------------------------------------------------
                                     50 ; paged external ram data
                                     51 ;--------------------------------------------------------
                                     52 	.area PSEG    (PAG,XDATA)
                                     53 ;--------------------------------------------------------
                                     54 ; external ram data
                                     55 ;--------------------------------------------------------
                                     56 	.area XSEG    (XDATA)
                                     57 ;--------------------------------------------------------
                                     58 ; absolute external ram data
                                     59 ;--------------------------------------------------------
                                     60 	.area XABS    (ABS,XDATA)
                                     61 ;--------------------------------------------------------
                                     62 ; external initialized ram data
                                     63 ;--------------------------------------------------------
                                     64 	.area XISEG   (XDATA)
                                     65 	.area HOME    (CODE)
                                     66 	.area GSINIT0 (CODE)
                                     67 	.area GSINIT1 (CODE)
                                     68 	.area GSINIT2 (CODE)
                                     69 	.area GSINIT3 (CODE)
                                     70 	.area GSINIT4 (CODE)
                                     71 	.area GSINIT5 (CODE)
                                     72 	.area GSINIT  (CODE)
                                     73 	.area GSFINAL (CODE)
                                     74 	.area CSEG    (CODE)
                                     75 ;--------------------------------------------------------
                                     76 ; global & static initialisations
                                     77 ;--------------------------------------------------------
                                     78 	.area HOME    (CODE)
                                     79 	.area GSINIT  (CODE)
                                     80 	.area GSFINAL (CODE)
                                     81 	.area GSINIT  (CODE)
                                     82 ;--------------------------------------------------------
                                     83 ; Home
                                     84 ;--------------------------------------------------------
                                     85 	.area HOME    (CODE)
                                     86 	.area HOME    (CODE)
                                     87 ;--------------------------------------------------------
                                     88 ; code
                                     89 ;--------------------------------------------------------
                                     90 	.area CSEG    (CODE)
                                     91 ;------------------------------------------------------------
                                     92 ;Allocation info for local variables in function 'efm8_delay_us'
                                     93 ;------------------------------------------------------------
                                     94 ;us                        Allocated to registers 
                                     95 ;------------------------------------------------------------
                                     96 ;	../../efm8/efm8_util/delay.c:7: void efm8_delay_us(uint16_t us) {
                                     97 ;	-----------------------------------------
                                     98 ;	 function efm8_delay_us
                                     99 ;	-----------------------------------------
      000000                        100 _efm8_delay_us:
                           000007   101 	ar7 = 0x07
                           000006   102 	ar6 = 0x06
                           000005   103 	ar5 = 0x05
                           000004   104 	ar4 = 0x04
                           000003   105 	ar3 = 0x03
                           000002   106 	ar2 = 0x02
                           000001   107 	ar1 = 0x01
                           000000   108 	ar0 = 0x00
      000000 AE 82            [24]  109 	mov	r6,dpl
      000002 AF 83            [24]  110 	mov	r7,dph
                                    111 ;	../../efm8/efm8_util/delay.c:8: while (us--) {
      000004                        112 00101$:
      000004 8E 04            [24]  113 	mov	ar4,r6
      000006 8F 05            [24]  114 	mov	ar5,r7
      000008 1E               [12]  115 	dec	r6
      000009 BE FF 01         [24]  116 	cjne	r6,#0xff,00113$
      00000C 1F               [12]  117 	dec	r7
      00000D                        118 00113$:
      00000D EC               [12]  119 	mov	a,r4
      00000E 4D               [12]  120 	orl	a,r5
      00000F 60 16            [24]  121 	jz	00104$
                                    122 ;	../../efm8/efm8_util/delay.c:42: __endasm;
      000011 00               [12]  123 	nop
      000012 00               [12]  124 	nop
      000013 00               [12]  125 	nop
      000014 00               [12]  126 	nop
      000015 00               [12]  127 	nop
      000016 00               [12]  128 	nop
      000017 00               [12]  129 	nop
      000018 00               [12]  130 	nop
      000019 00               [12]  131 	nop
      00001A 00               [12]  132 	nop
      00001B 00               [12]  133 	nop
      00001C 00               [12]  134 	nop
      00001D 00               [12]  135 	nop
      00001E 00               [12]  136 	nop
      00001F 00               [12]  137 	nop
      000020 00               [12]  138 	nop
      000021 00               [12]  139 	nop
      000022 00               [12]  140 	nop
      000023 00               [12]  141 	nop
      000024 00               [12]  142 	nop
      000025 80 DD            [24]  143 	sjmp	00101$
      000027                        144 00104$:
      000027 22               [24]  145 	ret
                                    146 ;------------------------------------------------------------
                                    147 ;Allocation info for local variables in function 'efm8_delay_ms'
                                    148 ;------------------------------------------------------------
                                    149 ;ms                        Allocated to registers 
                                    150 ;------------------------------------------------------------
                                    151 ;	../../efm8/efm8_util/delay.c:46: void efm8_delay_ms(uint16_t ms) {
                                    152 ;	-----------------------------------------
                                    153 ;	 function efm8_delay_ms
                                    154 ;	-----------------------------------------
      000028                        155 _efm8_delay_ms:
      000028 AE 82            [24]  156 	mov	r6,dpl
      00002A AF 83            [24]  157 	mov	r7,dph
                                    158 ;	../../efm8/efm8_util/delay.c:47: while (ms--) {
      00002C                        159 00101$:
      00002C 8E 04            [24]  160 	mov	ar4,r6
      00002E 8F 05            [24]  161 	mov	ar5,r7
      000030 1E               [12]  162 	dec	r6
      000031 BE FF 01         [24]  163 	cjne	r6,#0xff,00113$
      000034 1F               [12]  164 	dec	r7
      000035                        165 00113$:
      000035 EC               [12]  166 	mov	a,r4
      000036 4D               [12]  167 	orl	a,r5
      000037 60 10            [24]  168 	jz	00104$
                                    169 ;	../../efm8/efm8_util/delay.c:48: efm8_delay_us(1000);
      000039 90 03 E8         [24]  170 	mov	dptr,#0x03e8
      00003C C0 07            [24]  171 	push	ar7
      00003E C0 06            [24]  172 	push	ar6
      000040 12r00r00         [24]  173 	lcall	_efm8_delay_us
      000043 D0 06            [24]  174 	pop	ar6
      000045 D0 07            [24]  175 	pop	ar7
      000047 80 E3            [24]  176 	sjmp	00101$
      000049                        177 00104$:
      000049 22               [24]  178 	ret
                                    179 	.area CSEG    (CODE)
                                    180 	.area CONST   (CODE)
                                    181 	.area XINIT   (CODE)
                                    182 	.area CABS    (ABS,CODE)
